<div class="min-h-screen pt-28 w-full bg-gradient-to-br from-stone-50 to-stone-100 dark:from-neutral-900 dark:to-neutral-950 p-8">

  <!-- Loader -->
  <div *ngIf="loading" class="text-center py-60 text-gray-500 dark:text-gray-400">
    <i class="fas fa-spinner fa-spin text-3xl"></i>
    <p class="mt-3">Loading employees ...</p>
  </div>

  <!-- Container -->
  <div *ngIf="!loading" class="max-w-8xl mx-auto bg-gray-50 dark:bg-neutral-900 shadow-2xl rounded-3xl overflow-hidden border border-gray-200 dark:border-neutral-700">
    <div class="grid grid-cols-1 md:grid-cols-5 lg:grid-cols-4">

      <!-- Sidebar -->
      <aside class="p-8 bg-gradient-to-br from-indigo-700 to-blue-800 text-white md:col-span-2 lg:col-span-1 flex flex-col justify-between">
        <div>
          <h2 class="text-2xl font-extrabold mb-6 flex items-center gap-2">
            <i class="fas fa-users"></i> Employees
          </h2>

          <!-- Search -->
          <div class="relative w-full max-w-md">
            <div class="flex justify-between items-center">
              <input type="text"
                     [(ngModel)]="searchQuery"
                     placeholder="by name , position..."
                     class="w-full placeholder:text-neutral-500 p-3 pr-12 rounded-lg border-0 focus:ring-2 focus:ring-indigo-300 text-gray-900" />

              <button (click)="search()"
                      class="bg-white text-indigo-700 ms-2 px-3 py-3 rounded-lg hover:bg-neutral-300 transition">
                <i class="fas fa-search"></i>
              </button>
            </div>
            <p class="mt-3 text-indigo-100 text-sm">Search by name, position, department...</p>
          </div>
        </div>
      </aside>

      <!-- Main Content -->
      <section class="p-10 md:col-span-3 max-h-[80vh] overflow-y-auto hide-scrollbar">

        <!-- No Employees -->
        <div *ngIf="employees.length === 0"
             class="flex flex-col items-center justify-center py-24 px-6 text-center bg-white dark:bg-neutral-800 rounded-2xl shadow-sm border border-gray-200 dark:border-neutral-700">
          <div class="mb-4">
            <i class="fas fa-users text-6xl text-gray-400 dark:text-gray-500"></i>
          </div>
          <h2 class="text-xl font-semibold text-gray-700 dark:text-gray-200">No Employees Found</h2>
          <p class="mt-2 text-gray-500 dark:text-gray-400 max-w-md">
            You donâ€™t have any employees added yet. Start by creating a new employee profile.
          </p>
          <button *ngIf="role !== 'user'" routerLink="/add-user"
                  class="mt-6 px-5 py-2.5 rounded-xl bg-blue-600 hover:bg-blue-700 text-white font-medium transition-all shadow-sm flex items-center gap-2">
            <i class="fas fa-plus"></i> Add Employee
          </button>
        </div>

        <!-- Employees Grid -->
        <div *ngIf="displayedEmployees.length > 0 && employees.length !== 0" class="grid grid-cols-1 lg:grid-cols-3 gap-6">
          <div *ngFor="let emp of displayedEmployees"
               [routerLink]="['/employees', emp.id]"
               class="bg-gray-200 cursor-pointer dark:bg-neutral-800 rounded-2xl shadow-md p-6 flex flex-col items-center hover:-translate-y-1 transition">

            <!-- Avatar -->
            <div class="w-24 h-24 rounded-full overflow-hidden shadow-md mb-4 border-4 border-indigo-100 dark:border-neutral-700">
              <img *ngIf="emp.image" [src]="emp.image" alt="avatar" class="w-full h-full object-cover">
            </div>

            <!-- Name & Position -->
            <h3 class="text-lg font-bold text-gray-900 dark:text-white text-center">{{ emp.name }}</h3>
            <p class="text-gray-500 dark:text-gray-400 text-sm text-center mb-4">{{ emp.position }} - {{ emp.department }}</p>

            <!-- Detailed Info -->
            <div class="w-full text-sm text-gray-700 dark:text-gray-300 space-y-1  pt-3">
              <p><i class="fas fa-id-card mr-1 text-indigo-600"></i> <span class="font-semibold">ID:</span> {{ emp.id }}</p>
              <p><i class="fas fa-venus-mars mr-1 text-indigo-600"></i> <span class="font-semibold">Gender:</span> {{ emp.gender }}</p>
              <p><i class="fas fa-city mr-1 text-indigo-600"></i> <span class="font-semibold">City:</span> {{ emp.city }}</p>
              <p><i class="fas fa-user-clock mr-1 text-indigo-600"></i> <span class="font-semibold">Age:</span> {{ emp.age }}</p>
              <p class="pb-2"><i class="fas fa-birthday-cake mr-1 text-indigo-600"></i> <span class="font-semibold">Birthday:</span> {{ emp.birthday }}</p>
              <p class="border-t border-gray-400 dark:border-neutral-700 pt-2" *ngIf="emp.salary"><i class="fas fa-dollar-sign mr-1 text-green-400"></i> <span class="font-semibold">Salary:</span> {{ emp.salary | currency }}</p>
              <p *ngIf="emp.email"><i class="fas fa-envelope mr-1 text-red-700"></i> <span class="font-semibold">Email:</span> {{ emp.email }}</p>
              <p *ngIf="emp.phone"><i class="fas fa-phone mr-1 text-violet-600"></i> <span class="font-semibold">Phone:</span> {{ emp.phone }}</p>
              <p *ngIf="emp.hireDate"><i class="fas fa-calendar-check mr-1 text-cyan-600"></i> <span class="font-semibold">Hire Date:</span> {{ emp.hireDate }}</p>
            </div>

          </div>
        </div>

        <!-- Pagination Controls Fixed Bottom -->
        <div *ngIf="totalPages > 1"
            class="fixed bottom-4 left-0 w-full flex justify-center items-center gap-3 z-50">
          <button (click)="prevPage()"
                  [disabled]="currentPage === 1"
                  class="px-4 py-2 bg-gray-200 dark:bg-neutral-700 rounded-lg hover:bg-gray-300 dark:hover:bg-neutral-600 transition disabled:opacity-50 disabled:cursor-not-allowed">
            <i class="fas fa-chevron-left"></i>
          </button>
          <span class="px-3 py-2 bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300 rounded-lg">
            Page {{ currentPage }} of {{ totalPages }}
          </span>
          <button (click)="nextPage()"
                  [disabled]="currentPage === totalPages"
                  class="px-4 py-2 bg-gray-200 dark:bg-neutral-700 rounded-lg hover:bg-gray-300 dark:hover:bg-neutral-600 transition disabled:opacity-50 disabled:cursor-not-allowed">
            <i class="fas fa-chevron-right"></i>
          </button>
        </div>

      </section>
    </div>
  </div>
</div>
